<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>An√°lise de Viabilidade - Est√©tica Corporal</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <h1>An√°lise de Viabilidade Financeira</h1>
                <p>Sistema de Gest√£o para Est√©tica Corporal</p>
                <div class="header-actions">
                    <button class="btn btn--sm btn--outline" onclick="window.app.exportData()">üíæ Salvar Dados</button>
                    <button class="btn btn--sm btn--outline" onclick="window.app.importData()">üìÅ Carregar Backup</button>
                    <button class="btn btn--sm btn--secondary" onclick="window.app.clearData()">üóëÔ∏è Limpar Dados</button>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="app-nav">
            <div class="nav-tabs">
                <button class="nav-tab active" data-section="dashboard">
                    <span class="tab-icon">üìä</span>
                    Dashboard
                </button>
                <button class="nav-tab" data-section="cadastros">
                    <span class="tab-icon">üìã</span>
                    Cadastros
                </button>
                <button class="nav-tab" data-section="calculos">
                    <span class="tab-icon">üßÆ</span>
                    C√°lculos
                </button>
                <button class="nav-tab" data-section="relatorios">
                    <span class="tab-icon">üìà</span>
                    Relat√≥rios
                </button>
                <button class="nav-tab" data-section="projecao">
                    <span class="tab-icon">üöÄ</span>
                    Proje√ß√£o
                </button>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="app-main">
            <!-- Se√ß√£o Dashboard -->
            <section class="app-section active" id="dashboard">
                <div class="section-header">
                    <h2>Dashboard Executivo</h2>
                    <p>Vis√£o geral do neg√≥cio com indicadores de servi√ßos e produtos</p>
                </div>

                <div class="dashboard-grid">
                    <!-- Indicadores Principais -->
                    <div class="indicadores-container">
                        <div class="indicador-card">
                            <h4>Receita Total</h4>
                            <div class="indicador-valor" id="receitaTotal">R$ 0,00</div>
                            <small>Servi√ßos + Produtos</small>
                        </div>
                        <div class="indicador-card">
                            <h4>Margem Operacional</h4>
                            <div class="indicador-valor" id="margemOperacional">0%</div>
                            <small>Resultado / Receita</small>
                        </div>
                        <div class="indicador-card">
                            <h4>Servi√ßos Cadastrados</h4>
                            <div class="indicador-valor" id="totalServicos">0</div>
                            <small id="valorMedioServicos">Valor M√©dio: R$ 0</small>
                        </div>
                        <div class="indicador-card">
                            <h4>Produtos Cadastrados</h4>
                            <div class="indicador-valor" id="totalProdutos">0</div>
                            <small id="valorMedioProdutos">Valor M√©dio: R$ 0</small>
                        </div>
                    </div>

                    <!-- Gr√°fico Mix Receita -->
                    <div class="card">
                        <div class="card__header">
                            <h3>Mix de Receita - Servi√ßos vs Produtos</h3>
                        </div>
                        <div class="card__body">
                            <div class="chart-container" style="position: relative; height: 300px;">
                                <canvas id="mixReceitaChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Simula√ß√£o R√°pida -->
                    <div class="card">
                        <div class="card__header">
                            <h3>Simula√ß√£o R√°pida</h3>
                        </div>
                        <div class="card__body">
                            <div class="simulacao-rapida">
                                <div class="form-group">
                                    <label class="form-label">Taxa de Ocupa√ß√£o (%)</label>
                                    <input type="range" id="taxaSimulacao" min="10" max="100" value="75" class="range-input">
                                    <span id="taxaSimulacaoValue">75%</span>
                                </div>
                                <div class="resultado-simulacao">
                                    <div class="metric">
                                        <span class="label">Receita Mensal:</span>
                                        <span class="value" id="receitaSimulacao">R$ 0,00</span>
                                    </div>
                                    <div class="metric">
                                        <span class="label">Resultado:</span>
                                        <span class="value" id="resultadoSimulacao">R$ 0,00</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Se√ß√£o Cadastros -->
            <section class="app-section" id="cadastros">
                <div class="section-header">
                    <h2>Cadastros</h2>
                    <p>Gerencie servi√ßos, produtos, materiais e par√¢metros</p>
                </div>

                <div class="cadastros-accordion">
                    <!-- Accordion Item: Servi√ßos -->
                    <div class="accordion-item">
                        <button class="accordion-header" onclick="toggleAccordion('servicos')">
                            <span>Servi√ßos (<span id="countServicos">0</span> cadastrados)</span>
                            <span class="accordion-icon">‚ñº</span>
                        </button>
                        <div class="accordion-content" id="accordionServicos">
                            <div class="card">
                                <div class="card__header">
                                    <div class="section-summary">
                                        <h4>Valor Total Estimado: <span id="valorTotalServicos">R$ 0,00</span></h4>
                                    </div>
                                    <button class="btn btn--sm btn--primary" onclick="window.app.adicionarServico()">+ Adicionar</button>
                                </div>
                                <div class="card__body">
                                    <div class="table-container">
                                        <table class="data-table" id="servicosTable">
                                            <thead>
                                                <tr>
                                                    <th>C√≥digo</th>
                                                    <th>Nome</th>
                                                    <th>Dura√ß√£o (min)</th>
                                                    <th>Categoria</th>
                                                    <th>Margem (%)</th>
                                                    <th>A√ß√µes</th>
                                                </tr>
                                            </thead>
                                            <tbody id="servicosTableBody">
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Accordion Item: Produtos -->
                    <div class="accordion-item">
                        <button class="accordion-header" onclick="toggleAccordion('produtos')">
                            <span>Produtos (<span id="countProdutos">0</span> cadastrados) - Custo Total: <span id="custoTotalProdutos">R$ 0,00</span></span>
                            <span class="accordion-icon">‚ñº</span>
                        </button>
                        <div class="accordion-content" id="accordionProdutos">
                            <div class="card">
                                <div class="card__header">
                                    <div class="section-summary">
                                        <h4>Receita Potencial: <span id="receitaPotencialProdutos">R$ 0,00</span></h4>
                                    </div>
                                    <button class="btn btn--sm btn--primary" onclick="window.app.adicionarProduto()">+ Adicionar</button>
                                </div>
                                <div class="card__body">
                                    <div class="table-container">
                                        <table class="data-table" id="produtosTable">
                                            <thead>
                                                <tr>
                                                    <th>C√≥digo</th>
                                                    <th>Nome</th>
                                                    <th>Unidade</th>
                                                    <th>Custo (R$)</th>
                                                    <th>Margem (%)</th>
                                                    <th>Categoria</th>
                                                    <th>A√ß√µes</th>
                                                </tr>
                                            </thead>
                                            <tbody id="produtosTableBody">
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Accordion Item: Materiais -->
                    <div class="accordion-item">
                        <button class="accordion-header" onclick="toggleAccordion('materiais')">
                            <span>Materiais (<span id="countMateriais">0</span> cadastrados)</span>
                            <span class="accordion-icon">‚ñº</span>
                        </button>
                        <div class="accordion-content" id="accordionMateriais">
                            <div class="card">
                                <div class="card__header">
                                    <button class="btn btn--sm btn--primary" onclick="window.app.adicionarMaterial()">+ Adicionar</button>
                                </div>
                                <div class="card__body">
                                    <div class="table-container">
                                        <table class="data-table" id="materiaisTable">
                                            <thead>
                                                <tr>
                                                    <th>C√≥digo</th>
                                                    <th>Nome</th>
                                                    <th>Custo Unit. (R$)</th>
                                                    <th>Rendimento</th>
                                                    <th>Unidade</th>
                                                    <th>A√ß√µes</th>
                                                </tr>
                                            </thead>
                                            <tbody id="materiaisTableBody">
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Accordion Item: Equipamentos -->
                    <div class="accordion-item">
                        <button class="accordion-header" onclick="toggleAccordion('equipamentos')">
                            <span>Equipamentos (<span id="countEquipamentos">0</span> cadastrados)</span>
                            <span class="accordion-icon">‚ñº</span>
                        </button>
                        <div class="accordion-content" id="accordionEquipamentos">
                            <div class="card">
                                <div class="card__header">
                                    <button class="btn btn--sm btn--primary" onclick="window.app.adicionarEquipamento()">+ Adicionar</button>
                                </div>
                                <div class="card__body">
                                    <div class="table-container">
                                        <table class="data-table" id="equipamentosTable">
                                            <thead>
                                                <tr>
                                                    <th>C√≥digo</th>
                                                    <th>Nome</th>
                                                    <th>Custo Aquisi√ß√£o (R$)</th>
                                                    <th>Vida √ötil (meses)</th>
                                                    <th>Custo/Hora (R$)</th>
                                                    <th>A√ß√µes</th>
                                                </tr>
                                            </thead>
                                            <tbody id="equipamentosTableBody">
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Accordion Item: Funcion√°rios -->
                    <div class="accordion-item">
                        <button class="accordion-header" onclick="toggleAccordion('funcionarios')">
                            <span>Funcion√°rios (<span id="countFuncionarios">0</span> cadastrados)</span>
                            <span class="accordion-icon">‚ñº</span>
                        </button>
                        <div class="accordion-content" id="accordionFuncionarios">
                            <div class="card">
                                <div class="card__header">
                                    <button class="btn btn--sm btn--primary" onclick="window.app.adicionarFuncionario()">+ Adicionar</button>
                                </div>
                                <div class="card__body">
                                    <div class="table-container">
                                        <table class="data-table" id="funcionariosTable">
                                            <thead>
                                                <tr>
                                                    <th>Nome</th>
                                                    <th>Cargo</th>
                                                    <th>Sal√°rio (R$)</th>
                                                    <th>Tipo</th>
                                                    <th>A√ß√µes</th>
                                                </tr>
                                            </thead>
                                            <tbody id="funcionariosTableBody">
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Accordion Item: Despesas Fixas -->
                    <div class="accordion-item">
                        <button class="accordion-header" onclick="toggleAccordion('despesasFixas')">
                            <span>Despesas Fixas - Total: <span id="totalDespesasFixas">R$ 0,00</span></span>
                            <span class="accordion-icon">‚ñº</span>
                        </button>
                        <div class="accordion-content" id="accordionDespesasFixas">
                            <div class="card">
                                <div class="card__header">
                                    <button class="btn btn--sm btn--primary" onclick="window.app.adicionarDespesaFixa()">+ Adicionar</button>
                                </div>
                                <div class="card__body">
                                    <div class="table-container">
                                        <table class="data-table" id="despesasFixasTable">
                                            <thead>
                                                <tr>
                                                    <th>Descri√ß√£o</th>
                                                    <th>Valor (R$)</th>
                                                    <th>Categoria</th>
                                                    <th>A√ß√µes</th>
                                                </tr>
                                            </thead>
                                            <tbody id="despesasFixasTableBody">
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Accordion Item: Par√¢metros -->
                    <div class="accordion-item">
                        <button class="accordion-header" onclick="toggleAccordion('parametros')">
                            <span>Par√¢metros de Atendimento</span>
                            <span class="accordion-icon">‚ñº</span>
                        </button>
                        <div class="accordion-content" id="accordionParametros">
                            <div class="card">
                                <div class="card__body">
                                    <div class="form-grid">
                                        <div class="form-group">
                                            <label class="form-label">Horas √öteis/Dia</label>
                                            <input type="number" class="form-control" id="horasUteisPorDia" min="1" max="24">
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Dias √öteis/M√™s</label>
                                            <input type="number" class="form-control" id="diasUteisPorMes" min="1" max="31">
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Taxa de Ocupa√ß√£o (%)</label>
                                            <input type="number" class="form-control" id="taxaOcupacao" min="0" max="100" step="0.1">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Accordion Item: Consumo de Materiais -->
                    <div class="accordion-item">
                        <button class="accordion-header" onclick="toggleAccordion('consumoMateriais')">
                            <span>Consumo de Materiais por Servi√ßo</span>
                            <span class="accordion-icon">‚ñº</span>
                        </button>
                        <div class="accordion-content" id="accordionConsumoMateriais">
                            <div class="card">
                                <div class="card__body">
                                    <div id="consumoMateriaisContainer">
                                        <!-- Conte√∫do ser√° gerado dinamicamente -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Se√ß√£o C√°lculos -->
            <section class="app-section" id="calculos">
                <div class="section-header">
                    <h2>C√°lculos</h2>
                    <p>Custos e pre√ßos calculados automaticamente</p>
                </div>

                <div class="calculos-grid">
                    <!-- Custos por Servi√ßos -->
                    <div class="card">
                        <div class="card__header">
                            <h3>Custos por Servi√ßos</h3>
                        </div>
                        <div class="card__body">
                            <div class="table-container">
                                <table class="data-table" id="calculosServicosTable">
                                    <thead>
                                        <tr>
                                            <th>Servi√ßo</th>
                                            <th>Custo Material</th>
                                            <th>Custo M.O.</th>
                                            <th>Custo Equip.</th>
                                            <th>Custo Fixo</th>
                                            <th>Custo Total</th>
                                            <th>Pre√ßo Final</th>
                                            <th>Margem</th>
                                        </tr>
                                    </thead>
                                    <tbody id="calculosServicosTableBody">
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Custos por Produtos -->
                    <div class="card">
                        <div class="card__header">
                            <h3>Custos por Produtos</h3>
                        </div>
                        <div class="card__body">
                            <div class="table-container">
                                <table class="data-table" id="calculosProdutosTable">
                                    <thead>
                                        <tr>
                                            <th>Produto</th>
                                            <th>Custo Produto</th>
                                            <th>Custos Rateados</th>
                                            <th>Custo Total</th>
                                            <th>Margem (%)</th>
                                            <th>Pre√ßo Final</th>
                                        </tr>
                                    </thead>
                                    <tbody id="calculosProdutosTableBody">
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Se√ß√£o Relat√≥rios -->
            <section class="app-section" id="relatorios">
                <div class="section-header">
                    <h2>Relat√≥rios</h2>
                    <p>DRE, indicadores e an√°lise de viabilidade</p>
                </div>

                <div class="relatorios-grid">
                    <!-- Indicadores Financeiros -->
                    <div class="indicadores-container">
                        <div class="indicador-card">
                            <h4>Ticket M√©dio Servi√ßos</h4>
                            <div class="indicador-valor" id="ticketMedioServicos">R$ 0,00</div>
                        </div>
                        <div class="indicador-card">
                            <h4>Ticket M√©dio Produtos</h4>
                            <div class="indicador-valor" id="ticketMedioProdutos">R$ 0,00</div>
                        </div>
                        <div class="indicador-card">
                            <h4>Mix Servi√ßos</h4>
                            <div class="indicador-valor" id="mixServicos">0%</div>
                        </div>
                        <div class="indicador-card">
                            <h4>Mix Produtos</h4>
                            <div class="indicador-valor" id="mixProdutos">0%</div>
                        </div>
                    </div>

                    <!-- DRE Completo -->
                    <div class="card">
                        <div class="card__header">
                            <h3>DRE - Demonstra√ß√£o de Resultado (Mensal)</h3>
                        </div>
                        <div class="card__body">
                            <div class="dre-container">
                                <div class="dre-secao">
                                    <h4>RECEITAS</h4>
                                    <div class="dre-linha">
                                        <span>Receita com Servi√ßos</span>
                                        <span id="receitaServicos">R$ 0,00</span>
                                    </div>
                                    <div class="dre-linha">
                                        <span>Receita com Produtos</span>
                                        <span id="receitaProdutos">R$ 0,00</span>
                                    </div>
                                    <div class="dre-linha total">
                                        <span><strong>= Receita Bruta Total</strong></span>
                                        <span id="receitaBrutaTotal"><strong>R$ 0,00</strong></span>
                                    </div>
                                </div>

                                <div class="dre-secao">
                                    <h4>CUSTOS VARI√ÅVEIS</h4>
                                    <div class="dre-linha">
                                        <span>Custos Vari√°veis Servi√ßos</span>
                                        <span id="custosVariaveisServicos">R$ 0,00</span>
                                    </div>
                                    <div class="dre-linha">
                                        <span>Custos Vari√°veis Produtos</span>
                                        <span id="custosVariaveisProdutos">R$ 0,00</span>
                                    </div>
                                    <div class="dre-linha margem">
                                        <span><strong>= Margem de Contribui√ß√£o</strong></span>
                                        <span id="margemContribuicaoTotal"><strong>R$ 0,00</strong></span>
                                    </div>
                                </div>

                                <div class="dre-secao">
                                    <h4>CUSTOS FIXOS</h4>
                                    <div class="dre-linha">
                                        <span>Despesas Fixas</span>
                                        <span id="despesasFixasTotal">R$ 0,00</span>
                                    </div>
                                    <div class="dre-linha resultado">
                                        <span><strong>= RESULTADO L√çQUIDO</strong></span>
                                        <span id="resultadoLiquidoTotal"><strong>R$ 0,00</strong></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- An√°lise de Mix -->
                    <div class="card">
                        <div class="card__header">
                            <h3>An√°lise de Mix - Servi√ßos vs Produtos</h3>
                        </div>
                        <div class="card__body">
                            <div class="chart-container" style="position: relative; height: 300px;">
                                <canvas id="analiseChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- An√°lise de Viabilidade -->
                    <div class="card viabilidade-card">
                        <div class="card__header">
                            <h3>An√°lise de Viabilidade do Neg√≥cio</h3>
                        </div>
                        <div class="card__body">
                            <div class="viabilidade-resultado">
                                <div class="status-indicator">
                                    <span class="status" id="statusViabilidade">Analisando...</span>
                                </div>
                                <div class="recomendacoes">
                                    <h4>Recomenda√ß√µes Estrat√©gicas:</h4>
                                    <ul id="listaRecomendacoes">
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Se√ß√£o Proje√ß√£o -->
            <section class="app-section" id="projecao">
                <div class="section-header">
                    <h2>Proje√ß√£o de Crescimento</h2>
                    <p>Cen√°rios de crescimento para servi√ßos e produtos</p>
                </div>

                <div class="projecao-grid">
                    <div class="card">
                        <div class="card__header">
                            <h3>Par√¢metros de Crescimento</h3>
                        </div>
                        <div class="card__body">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label class="form-label">Crescimento Mensal Receita (%)</label>
                                    <input type="number" class="form-control" id="crescimentoReceita" step="0.1" value="5.0">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Crescimento Mensal Custos (%)</label>
                                    <input type="number" class="form-control" id="crescimentoCustos" step="0.1" value="2.0">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Meta 12 Meses (R$)</label>
                                    <input type="number" class="form-control" id="meta12Meses" step="1000" value="150000">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Mix Produtos (% da receita)</label>
                                    <input type="number" class="form-control" id="mixProdutosProjecao" step="1" min="0" max="100" value="30">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card__header">
                            <h3>Proje√ß√£o 12 Meses</h3>
                        </div>
                        <div class="card__body">
                            <div class="chart-container" style="position: relative; height: 400px;">
                                <canvas id="projecaoChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="app.js"></script>
</body>
</html>